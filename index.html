<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<title>I Can Transform</title>
	<link rel="icon" href="favicon.png">
	<link rel="stylesheet" href="styles/index.css">
</head>
<body>
	<img class="image" id="loading" src="loading.png" alt="Loading..." width="32" height="32">
	<div id="msg" style="text-align:center">
		<b>Please wait a few moments, it will start...<br>
			Do you like speed? Then you will love this game!
		</b>
	</div>
	
    <canvas id="canvas" oncontextmenu="event.preventDefault()">
      Loading... 
    </canvas>
	
	<hr>
	<div style="text-align:center">
	You can download the Android version
	<a href="https://play.google.com/store/apps/details?id=com.isdaouda.icantransform" title="I Can Transform Android" target="_blank">
	here (Google Play)
	</a>
	<hr>
	<p><b><u>Eng:</u></b> Do you have bugs to report or questions? Please click <a href="mailto:isdaouda.n@gmail.com">here</a> to contact us.</p>
	<p><b><u>Fr:</u></b> Avez vous des bugs à signaler ou des questions? S'il vous plaît, cliquez <a href="mailto:isdaouda.n@gmail.com">ici</a> pour nous contacter.</p>
	</div>
    <script type="text/javascript">		
		window.Module = {
			canvas: document.getElementById('canvas'),
			print: console.log,
			printErr: console.error,
		};

		var logBackup = console.log;
		var logMessages = [];

		console.log = function() {
			logMessages.push.apply(logMessages, arguments);
			logBackup.apply(console, arguments);
		};
		
		var showError = false;		
		var second = 0;
		function chrono() {
			second++;
			if (!logMessages.includes("Start successfully!"))
			{
				if (second > 60)
				{
					if (!showError)
					{
						document.getElementById('msg').innerHTML = "Um... The game is taking too long to load.<br>Please try to restart the page.";
						document.getElementById('msg').style.color = 'red';
						showError = true;
					}
				}
			}
			else
			{
				document.getElementById('loading').style.visibility = 'hidden';
				document.getElementById('msg').style.visibility = 'hidden';
			}
		}
		setInterval("chrono()", 1000);
    </script>
    <script async src="isengine.js"></script>
</body>
</html>
