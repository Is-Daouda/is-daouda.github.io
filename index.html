<!DOCTYPE html>
<html>
<head>
	<title>I Can Transform</title>
	<meta charset="utf-8">
	<meta content="user-scalable=no" name="viewport">
	<meta name="description" content="2D Action-Platform Game.">
	<link rel="icon" href="favicon.png">
	<link rel="stylesheet" href="styles/index.css">
</head>
<body>
	<div id="div_header" style="text-align:center">
		<img class="image" id="img_loading" src="loading.png" alt="Loading..." width="32" height="32">
		<b>Please wait a few moments, it will start...<br>
			Do you like speed? Then you will love this game!
		</b>
	</div>
	
    <canvas id="canvas" oncontextmenu="event.preventDefault()">
      Loading... 
    </canvas>
	
	<div id="div_footer">
		<hr>
		<div class="center-justified">
			<b><u>Eng:</u></b>
			<br>
			It can happen that the game does not work well on some browsers because we use a technology a little recent (which is not yet well supported on all browsers) to make our game run.
			In case you encounter a problem note that you can play the <b>Android version 
			(<a href="https://play.google.com/store/apps/details?id=com.isdaouda.icantransform" title="I Can Transform Android" target="_blank">Available on Google Play</a>)</b> 
			on your Smartphone or Android Emulator (Bluestacks, ...).
			<br>
			<br>
			If you have any bugs to report or questions, please click <a href="mailto:isdaouda.n@gmail.com">here</a> to contact us.
		</div>
		<hr>
		<div class="center-justified">
			<b><u>Fr:</u></b>
			<br>
			Il peut arriver que le jeu ne fonctionne pas bien sur certains navigateurs car nous utilisons 
			une technologie un peu récente (qui n'est pas encore bien supportée sur tous les navigateurs) pour faire tourner notre jeu.
			Au cas où vous rencontrez un problème notez que vous pouvez jouer à la <b>version Android 
			(<a href="https://play.google.com/store/apps/details?id=com.isdaouda.icantransform" title="I Can Transform Android" target="_blank">Disponible sur Google Play</a>)</b> 
			sur votre Smartphone ou Emulateur Android (Bluestacks, ...).
			<br>
			<br>
			Si vous avez des bugs à signaler ou des questions, s'il vous plaît cliquez <a href="mailto:isdaouda.n@gmail.com">ici</a> pour nous contacter.
		</div>
	</div>
    <script type="text/javascript">		
		window.Module = {
			canvas: document.getElementById('canvas'),
			print: console.log,
			printErr: console.error,
		};
		
		// Full screen
		var useFullcreen = false;
		var gameStarted = false;
		function fullscreen() {		 
			if (!useFullcreen)
			{
				document.getElementById('div_footer').style.visibility = 'hidden';
				document.getElementById("img_fullscreen").src = "ico_fullscreen_w.png";
				document.body.style.backgroundImage = "url('empty.png')";
				useFullcreen = true;
			}
			else
			{
				document.getElementById('div_footer').style.visibility = 'visible';
				document.getElementById("img_fullscreen").src = "ico_fullscreen_b.png";
				document.body.style.backgroundImage = "url('background.png')";
				useFullcreen = false;
			}
		}
				
		var logBackup = console.log;
		var logMessages = [];
		console.log = function() {
			logMessages.push.apply(logMessages, arguments);
			logBackup.apply(console, arguments);
		};
		
		var showError = false;		
		var second = 0;
		function chrono() {
			second++;
			if (!logMessages.includes("Start successfully!"))
			{
				if (second > 90)
				{
					if (!showError)
					{
						document.getElementById('div_header').innerHTML = 'Um... The game is taking too long to load.<br>' +
																		'Please try to restart (<a href="">Click here</a onclick="location.reload(true);">) the page.';
						document.getElementById('div_header').style.color = 'red';
						showError = true;
					}
				}
			}
			else
			{
				if (!gameStarted)
				{
					document.getElementById('img_loading').style.visibility = 'hidden';
					document.getElementById('div_header').innerHTML = "<img id='img_fullscreen' src='ico_fullscreen_b.png' alt='Full Screen' onclick='fullscreen()'>";				
					fullscreen();
					gameStarted = true;
				}
			}
		}
		setInterval("chrono()", 1000);
    </script>
    <script async src="isengine.js"></script>
</body>
</html>
